import{_ as d}from"./chunks/ArticleMetadata.f06b230e.js";import{_ as h,i as l,o as e,c as y,b as c,f as p,g as o,w as k,e as D,j as C,a as u}from"./app.f6f466d0.js";const w=JSON.parse('{"title":"个人常用 Docker 命令","description":"","frontmatter":{"title":"个人常用 Docker 命令","author":"查尔斯","date":"2022/10/01 22:33","isTop":true,"categories":["杂碎逆袭史"],"tags":["Docker"]},"headers":[{"level":2,"title":"镜像相关","slug":"镜像相关","link":"#镜像相关","children":[{"level":3,"title":"查看本地镜像列表","slug":"查看本地镜像列表","link":"#查看本地镜像列表","children":[]},{"level":3,"title":"从记录中心查询镜像","slug":"从记录中心查询镜像","link":"#从记录中心查询镜像","children":[]},{"level":3,"title":"从记录中心拉取镜像到本地","slug":"从记录中心拉取镜像到本地","link":"#从记录中心拉取镜像到本地","children":[]},{"level":3,"title":"删除本地镜像","slug":"删除本地镜像","link":"#删除本地镜像","children":[]},{"level":3,"title":"从 Dockerfile 创建镜像","slug":"从-dockerfile-创建镜像","link":"#从-dockerfile-创建镜像","children":[]},{"level":3,"title":"将本地镜像导出为 tar 文件","slug":"将本地镜像导出为-tar-文件","link":"#将本地镜像导出为-tar-文件","children":[]},{"level":3,"title":"从 tar 文件导入为本地镜像","slug":"从-tar-文件导入为本地镜像","link":"#从-tar-文件导入为本地镜像","children":[]}]},{"level":2,"title":"容器相关","slug":"容器相关","link":"#容器相关","children":[{"level":3,"title":"查看容器列表","slug":"查看容器列表","link":"#查看容器列表","children":[]},{"level":3,"title":"创建容器并运行","slug":"创建容器并运行","link":"#创建容器并运行","children":[]},{"level":3,"title":"停止容器","slug":"停止容器","link":"#停止容器","children":[]},{"level":3,"title":"启动容器","slug":"启动容器","link":"#启动容器","children":[]},{"level":3,"title":"重启容器","slug":"重启容器","link":"#重启容器","children":[]},{"level":3,"title":"删除容器","slug":"删除容器","link":"#删除容器","children":[]},{"level":3,"title":"进入容器内部","slug":"进入容器内部","link":"#进入容器内部","children":[]},{"level":3,"title":"从容器内部退出","slug":"从容器内部退出","link":"#从容器内部退出","children":[]},{"level":3,"title":"向容器内拷贝文件","slug":"向容器内拷贝文件","link":"#向容器内拷贝文件","children":[]},{"level":3,"title":"查看容器日志","slug":"查看容器日志","link":"#查看容器日志","children":[]},{"level":3,"title":"备份容器为本地镜像","slug":"备份容器为本地镜像","link":"#备份容器为本地镜像","children":[]},{"level":3,"title":"将容器导出为 tar.gz 文件","slug":"将容器导出为-tar-gz-文件","link":"#将容器导出为-tar-gz-文件","children":[]},{"level":3,"title":"将 tar.gz 文件导入为镜像","slug":"将-tar-gz-文件导入为镜像","link":"#将-tar-gz-文件导入为镜像","children":[]}]},{"level":2,"title":"网络相关","slug":"网络相关","link":"#网络相关","children":[{"level":3,"title":"查看网络列表","slug":"查看网络列表","link":"#查看网络列表","children":[]},{"level":3,"title":"创建 bridge 网络","slug":"创建-bridge-网络","link":"#创建-bridge-网络","children":[]},{"level":3,"title":"删除网络","slug":"删除网络","link":"#删除网络","children":[]}]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[{"level":3,"title":"查看 docker 版本","slug":"查看-docker-版本","link":"#查看-docker-版本","children":[]},{"level":3,"title":"查看 docker 信息","slug":"查看-docker-信息","link":"#查看-docker-信息","children":[]}]},{"level":2,"title":"docker-compose命令","slug":"docker-compose命令","link":"#docker-compose命令","children":[{"level":3,"title":"启动并后台运行所有的服务","slug":"启动并后台运行所有的服务","link":"#启动并后台运行所有的服务","children":[]},{"level":3,"title":"停止并删除容器、网络、卷、镜像","slug":"停止并删除容器、网络、卷、镜像","link":"#停止并删除容器、网络、卷、镜像","children":[]},{"level":3,"title":"列出项目中目前的所有容器","slug":"列出项目中目前的所有容器","link":"#列出项目中目前的所有容器","children":[]},{"level":3,"title":"停止容器","slug":"停止容器-1","link":"#停止容器-1","children":[]},{"level":3,"title":"启动容器","slug":"启动容器-1","link":"#启动容器-1","children":[]},{"level":3,"title":"修改 yml 文件后，重新启动并后台运行","slug":"修改-yml-文件后-重新启动并后台运行","link":"#修改-yml-文件后-重新启动并后台运行","children":[]}]}],"relativePath":"categories/fragments/2022/10/01/个人常用Docker命令.md","lastUpdated":1672153722000}'),A={name:"categories/fragments/2022/10/01/个人常用Docker命令.md"},g={id:"个人常用-docker-命令",tabindex:"-1"},F=c("a",{class:"header-anchor",href:"#个人常用-docker-命令","aria-hidden":"true"},"#",-1),v=u(`<h2 id="镜像相关" tabindex="-1">镜像相关 <a class="header-anchor" href="#镜像相关" aria-hidden="true">#</a></h2><h3 id="查看本地镜像列表" tabindex="-1">查看本地镜像列表 <a class="header-anchor" href="#查看本地镜像列表" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker images</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker images</span></span>
<span class="line"></span></code></pre></div><h3 id="从记录中心查询镜像" tabindex="-1">从记录中心查询镜像 <a class="header-anchor" href="#从记录中心查询镜像" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker search 镜像关键词</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker search 镜像关键词</span></span>
<span class="line"></span></code></pre></div><h3 id="从记录中心拉取镜像到本地" tabindex="-1">从记录中心拉取镜像到本地 <a class="header-anchor" href="#从记录中心拉取镜像到本地" aria-hidden="true">#</a></h3><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>如果镜像名称后不指定 <strong>标签/版本</strong> ，则会默认使用最新版本（latest）。</p><p>例如：docker pull tomcat:8.5.0 拉取的就是 8.5.0 版本的 tomcat 镜像，而 docker pull tomcat -&gt; 拉取的实际是 docker pull tomcat:latest，这个 latest 是跟随记录中心中的最新版本变化的，无法确定当前拉取的是哪一个版本。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker pull 镜像名称[:标签/版本] </span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker pull 镜像名称</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:标签/版本</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><h3 id="删除本地镜像" tabindex="-1">删除本地镜像 <a class="header-anchor" href="#删除本地镜像" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#7F848E;"># 删除指定镜像</span></span>
<span class="line"><span style="color:#ABB2BF;">docker rmi 镜像ID/镜像名称 [镜像ID/镜像名称...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;"># 删除所有镜像</span></span>
<span class="line"><span style="color:#ABB2BF;">docker rmi </span><span style="color:#98C379;">\`docker images -q\`</span></span>
<span class="line"><span style="color:#ABB2BF;">docker rmi </span><span style="color:#98C379;">$(docker images -q)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#676E95;"># 删除指定镜像</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rmi 镜像ID/镜像名称 </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">镜像ID/镜像名称...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 删除所有镜像</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rmi </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">docker images -q</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rmi </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker images -q</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">笔者说</p><p><code>q</code> 是 quiet 的意思，加上这个参数后，docker images 输出的就不是镜像详细列表了，而是镜像 ID 列表，通常用于编写脚本时使用。</p><p>所以，上方删除所有镜像的命令实际是 docker rmi 镜像ID1 镜像ID2...</p></div><h3 id="从-dockerfile-创建镜像" tabindex="-1">从 Dockerfile 创建镜像 <a class="header-anchor" href="#从-dockerfile-创建镜像" aria-hidden="true">#</a></h3><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>如果镜像名称后不指定 <strong>标签/版本</strong> ，则会默认使用最新版本（latest）。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker build -t 镜像名称[:标签/版本] Dockerfile文件路径</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker build -t 镜像名称</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:标签/版本</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Dockerfile文件路径</span></span>
<span class="line"></span></code></pre></div><h3 id="将本地镜像导出为-tar-文件" tabindex="-1">将本地镜像导出为 tar 文件 <a class="header-anchor" href="#将本地镜像导出为-tar-文件" aria-hidden="true">#</a></h3><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>如果镜像名称后不指定 <strong>标签/版本</strong> ，则会默认使用最新版本（latest）。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker save -o/-output 文件路径.tar 镜像名称[:标签/版本]</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker save -o/-output 文件路径.tar 镜像名称</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:标签/版本</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="从-tar-文件导入为本地镜像" tabindex="-1">从 tar 文件导入为本地镜像 <a class="header-anchor" href="#从-tar-文件导入为本地镜像" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker load -i/-input 文件路径.tar</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker load -i/-input 文件路径.tar</span></span>
<span class="line"></span></code></pre></div><h2 id="容器相关" tabindex="-1">容器相关 <a class="header-anchor" href="#容器相关" aria-hidden="true">#</a></h2><h3 id="查看容器列表" tabindex="-1">查看容器列表 <a class="header-anchor" href="#查看容器列表" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#7F848E;"># 查看正在运行的容器</span></span>
<span class="line"><span style="color:#ABB2BF;">docker ps  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;"># 查看全部容器（包含已经停止的）</span></span>
<span class="line"><span style="color:#ABB2BF;">docker ps -a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;"># 模糊查询容器</span></span>
<span class="line"><span style="color:#ABB2BF;">docker ps [-a] | grep 容器关键词</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#676E95;"># 查看正在运行的容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 查看全部容器（包含已经停止的）</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps -a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 模糊查询容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-a</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep 容器关键词</span></span>
<span class="line"></span></code></pre></div><h3 id="创建容器并运行" tabindex="-1">创建容器并运行 <a class="header-anchor" href="#创建容器并运行" aria-hidden="true">#</a></h3><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>如果镜像名称后不指定 <strong>标签/版本</strong> ，则会默认使用最新版本（latest）。</p><p>如果本地不存在该版本的镜像，则会先从记录中心拉取到本地。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#7F848E;"># -d 指定容器在后台运行</span></span>
<span class="line"><span style="color:#7F848E;"># --name 指定容器名称</span></span>
<span class="line"><span style="color:#7F848E;"># -m 限定容器内存大小</span></span>
<span class="line"><span style="color:#7F848E;"># --restart 指定重新启动方式，always 表示始终重启</span></span>
<span class="line"><span style="color:#7F848E;"># -e 指定环境变量配置</span></span>
<span class="line"><span style="color:#7F848E;"># -p 指定容器和宿主机的网络端口映射</span></span>
<span class="line"><span style="color:#7F848E;"># -v 指定容器和宿主机的目录挂载</span></span>
<span class="line"><span style="color:#7F848E;"># --network 指定容器使用的网络</span></span>
<span class="line"><span style="color:#7F848E;"># --network-alias 指定容器在网络中的别名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">docker run -d \\</span></span>
<span class="line"><span style="color:#ABB2BF;">--name 容器名称 镜像名称[:标签/版本] \\</span></span>
<span class="line"><span style="color:#ABB2BF;">[-m xxxm] \\</span></span>
<span class="line"><span style="color:#ABB2BF;">--restart=always \\</span></span>
<span class="line"><span style="color:#ABB2BF;">[-e 环境变量名</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">环境变量值] \\</span></span>
<span class="line"><span style="color:#ABB2BF;">[-p 宿主机端口:容器内部端口] \\</span></span>
<span class="line"><span style="color:#ABB2BF;">[-v 宿主机目录:容器内部目录] \\</span></span>
<span class="line"><span style="color:#ABB2BF;">[--network 网络名称 --network-alias 网络别名]</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#676E95;"># -d 指定容器在后台运行</span></span>
<span class="line"><span style="color:#676E95;"># --name 指定容器名称</span></span>
<span class="line"><span style="color:#676E95;"># -m 限定容器内存大小</span></span>
<span class="line"><span style="color:#676E95;"># --restart 指定重新启动方式，always 表示始终重启</span></span>
<span class="line"><span style="color:#676E95;"># -e 指定环境变量配置</span></span>
<span class="line"><span style="color:#676E95;"># -p 指定容器和宿主机的网络端口映射</span></span>
<span class="line"><span style="color:#676E95;"># -v 指定容器和宿主机的目录挂载</span></span>
<span class="line"><span style="color:#676E95;"># --network 指定容器使用的网络</span></span>
<span class="line"><span style="color:#676E95;"># --network-alias 指定容器在网络中的别名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d \\</span></span>
<span class="line"><span style="color:#A6ACCD;">--name 容器名称 镜像名称</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:标签/版本</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-m xxxm</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">--restart=always \\</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-e 环境变量名</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">环境变量值</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-p 宿主机端口:容器内部端口</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-v 宿主机目录:容器内部目录</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">--network 网络名称 --network-alias 网络别名</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="停止容器" tabindex="-1">停止容器 <a class="header-anchor" href="#停止容器" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#7F848E;"># 停止指定容器</span></span>
<span class="line"><span style="color:#ABB2BF;">docker stop 容器ID/容器名称 [容器ID/容器名称...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;"># 停止所有容器</span></span>
<span class="line"><span style="color:#ABB2BF;">docker stop </span><span style="color:#98C379;">\`docker ps -aq\`</span></span>
<span class="line"><span style="color:#ABB2BF;">docker stop </span><span style="color:#98C379;">$(docker ps -aq)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#676E95;"># 停止指定容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker stop 容器ID/容器名称 </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">容器ID/容器名称...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 停止所有容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker stop </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">docker ps -aq</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">docker stop </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker ps -aq</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">笔者说</p><p><code>q</code> 是 quiet 的意思，加上这个参数后，docker ps 输出的就不是容器详细列表了，而是容器 ID 列表，通常用于编写脚本时使用。</p><p>所以，上方停止所有容器的命令实际是 docker stop 容器1ID 容器2ID...</p></div><h3 id="启动容器" tabindex="-1">启动容器 <a class="header-anchor" href="#启动容器" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker start 容器ID/容器名称</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker start 容器ID/容器名称</span></span>
<span class="line"></span></code></pre></div><h3 id="重启容器" tabindex="-1">重启容器 <a class="header-anchor" href="#重启容器" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker restart 容器ID/容器名称</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker restart 容器ID/容器名称</span></span>
<span class="line"></span></code></pre></div><h3 id="删除容器" tabindex="-1">删除容器 <a class="header-anchor" href="#删除容器" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#7F848E;"># 删除指定容器</span></span>
<span class="line"><span style="color:#ABB2BF;">docker rm 容器ID/容器名称 [容器ID/容器名称...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;"># 删除所有容器</span></span>
<span class="line"><span style="color:#ABB2BF;">docker rm </span><span style="color:#98C379;">\`docker ps -aq\`</span></span>
<span class="line"><span style="color:#ABB2BF;">docker rm </span><span style="color:#98C379;">$(docker ps -aq)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#676E95;"># 删除指定容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm 容器ID/容器名称 </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">容器ID/容器名称...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 删除所有容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">docker ps -aq</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker ps -aq</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">笔者说</p><p><code>q</code> 是 quiet 的意思，加上这个参数后，docker ps 输出的就不是容器详细列表了，而是容器 ID 列表，通常用于编写脚本时使用。</p><p>所以，上方删除所有容器的命令实际是 docker rm 容器1ID 容器2ID...</p></div><h3 id="进入容器内部" tabindex="-1">进入容器内部 <a class="header-anchor" href="#进入容器内部" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker </span><span style="color:#56B6C2;">exec</span><span style="color:#ABB2BF;"> -it 容器ID/容器名称 bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">docker </span><span style="color:#56B6C2;">exec</span><span style="color:#ABB2BF;"> -it 容器ID/容器名称 sh</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it 容器ID/容器名称 bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it 容器ID/容器名称 sh</span></span>
<span class="line"></span></code></pre></div><h3 id="从容器内部退出" tabindex="-1">从容器内部退出 <a class="header-anchor" href="#从容器内部退出" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#56B6C2;">exit</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"></span></code></pre></div><h3 id="向容器内拷贝文件" tabindex="-1">向容器内拷贝文件 <a class="header-anchor" href="#向容器内拷贝文件" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker cp 宿主机内文件路径 容器名称:容器内文件路径</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker cp 宿主机内文件路径 容器名称:容器内文件路径</span></span>
<span class="line"></span></code></pre></div><h3 id="查看容器日志" tabindex="-1">查看容器日志 <a class="header-anchor" href="#查看容器日志" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#7F848E;"># -f/--flow 跟踪日志输出</span></span>
<span class="line"><span style="color:#7F848E;"># -t/--timestamps 显示时间戳</span></span>
<span class="line"><span style="color:#7F848E;"># -n/--tail 从日志末尾显示的行数，默认为 all</span></span>
<span class="line"><span style="color:#7F848E;"># --since 自某个时间之后的日志</span></span>
<span class="line"><span style="color:#7F848E;"># 例如：--since &quot;2022-09-30&quot; 表示显示2022年9月30日后的日志</span></span>
<span class="line"><span style="color:#7F848E;"># 例如：--since 30m 表示显示最近 30 分钟内的日志</span></span>
<span class="line"><span style="color:#7F848E;"># --until 某个时间之前的日志</span></span>
<span class="line"><span style="color:#ABB2BF;">docker logs -f [-t] [-n 行数] [--since 开始时间] [--until 结束时间] 容器ID/容器名称</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#676E95;"># -f/--flow 跟踪日志输出</span></span>
<span class="line"><span style="color:#676E95;"># -t/--timestamps 显示时间戳</span></span>
<span class="line"><span style="color:#676E95;"># -n/--tail 从日志末尾显示的行数，默认为 all</span></span>
<span class="line"><span style="color:#676E95;"># --since 自某个时间之后的日志</span></span>
<span class="line"><span style="color:#676E95;"># 例如：--since &quot;2022-09-30&quot; 表示显示2022年9月30日后的日志</span></span>
<span class="line"><span style="color:#676E95;"># 例如：--since 30m 表示显示最近 30 分钟内的日志</span></span>
<span class="line"><span style="color:#676E95;"># --until 某个时间之前的日志</span></span>
<span class="line"><span style="color:#A6ACCD;">docker logs -f </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-t</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-n 行数</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">--since 开始时间</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">--until 结束时间</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> 容器ID/容器名称</span></span>
<span class="line"></span></code></pre></div><h3 id="备份容器为本地镜像" tabindex="-1">备份容器为本地镜像 <a class="header-anchor" href="#备份容器为本地镜像" aria-hidden="true">#</a></h3><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>如果镜像名称后不指定 <strong>标签/版本</strong> ，则会默认使用最新版本（latest）。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker commit [-a </span><span style="color:#98C379;">&quot;作者&quot;</span><span style="color:#ABB2BF;">] [-m </span><span style="color:#98C379;">&quot;信息&quot;</span><span style="color:#ABB2BF;">] 容器ID/容器名称 镜像名称[:标签/版本]</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker commit </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-a </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">作者</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-m </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">信息</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> 容器ID/容器名称 镜像名称</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:标签/版本</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h3 id="将容器导出为-tar-gz-文件" tabindex="-1">将容器导出为 tar.gz 文件 <a class="header-anchor" href="#将容器导出为-tar-gz-文件" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker </span><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> 容器ID/容器名称 &gt; 文件路径.tar.gz</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> 容器ID/容器名称 </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> 文件路径.tar.gz</span></span>
<span class="line"></span></code></pre></div><h3 id="将-tar-gz-文件导入为镜像" tabindex="-1">将 tar.gz 文件导入为镜像 <a class="header-anchor" href="#将-tar-gz-文件导入为镜像" aria-hidden="true">#</a></h3><div class="warning custom-block"><p class="custom-block-title">笔者说</p><p>如果镜像名称后不指定 <strong>标签/版本</strong> ，则会默认使用最新版本（latest）。</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker import 文件路径.tar.gz 镜像名称[:标签/版本]</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker import 文件路径.tar.gz 镜像名称</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:标签/版本</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h2 id="网络相关" tabindex="-1">网络相关 <a class="header-anchor" href="#网络相关" aria-hidden="true">#</a></h2><h3 id="查看网络列表" tabindex="-1">查看网络列表 <a class="header-anchor" href="#查看网络列表" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker network ls</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker network ls</span></span>
<span class="line"></span></code></pre></div><h3 id="创建-bridge-网络" tabindex="-1">创建 bridge 网络 <a class="header-anchor" href="#创建-bridge-网络" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker network create 网络名称</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker network create 网络名称</span></span>
<span class="line"></span></code></pre></div><h3 id="删除网络" tabindex="-1">删除网络 <a class="header-anchor" href="#删除网络" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker network rm 网络ID/网络名称</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker network rm 网络ID/网络名称</span></span>
<span class="line"></span></code></pre></div><h2 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他" aria-hidden="true">#</a></h2><h3 id="查看-docker-版本" tabindex="-1">查看 docker 版本 <a class="header-anchor" href="#查看-docker-版本" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker -v</span></span>
<span class="line"><span style="color:#ABB2BF;">docker version</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker -v</span></span>
<span class="line"><span style="color:#A6ACCD;">docker version</span></span>
<span class="line"></span></code></pre></div><h3 id="查看-docker-信息" tabindex="-1">查看 docker 信息 <a class="header-anchor" href="#查看-docker-信息" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker info</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker info</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-compose命令" tabindex="-1">docker-compose命令 <a class="header-anchor" href="#docker-compose命令" aria-hidden="true">#</a></h2><h3 id="启动并后台运行所有的服务" tabindex="-1">启动并后台运行所有的服务 <a class="header-anchor" href="#启动并后台运行所有的服务" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker-compose up -d</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker-compose up -d</span></span>
<span class="line"></span></code></pre></div><h3 id="停止并删除容器、网络、卷、镜像" tabindex="-1">停止并删除容器、网络、卷、镜像 <a class="header-anchor" href="#停止并删除容器、网络、卷、镜像" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker-compose down</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker-compose down</span></span>
<span class="line"></span></code></pre></div><h3 id="列出项目中目前的所有容器" tabindex="-1">列出项目中目前的所有容器 <a class="header-anchor" href="#列出项目中目前的所有容器" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker-compose ps</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker-compose ps</span></span>
<span class="line"></span></code></pre></div><h3 id="停止容器-1" tabindex="-1">停止容器 <a class="header-anchor" href="#停止容器-1" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker-compose stop 容器名</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker-compose stop 容器名</span></span>
<span class="line"></span></code></pre></div><h3 id="启动容器-1" tabindex="-1">启动容器 <a class="header-anchor" href="#启动容器-1" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker-compose start 容器名</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker-compose start 容器名</span></span>
<span class="line"></span></code></pre></div><h3 id="修改-yml-文件后-重新启动并后台运行" tabindex="-1">修改 yml 文件后，重新启动并后台运行 <a class="header-anchor" href="#修改-yml-文件后-重新启动并后台运行" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">docker-compose up --force-recreate -d</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">docker-compose up --force-recreate -d</span></span>
<span class="line"></span></code></pre></div>`,76);function B(s,b,m,f,E,x){const r=l("Badge"),t=d,i=l("ClientOnly");return e(),y("div",null,[c("h1",g,[p("个人常用 Docker 命令 "),o(r,{text:"持续更新",type:"warning"}),p(),F]),o(i,null,{default:k(()=>{var a,n;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=s.$frontmatter)==null?void 0:n.showArticleMetadata)??!1)?(e(),D(t,{key:0,article:s.$frontmatter},null,8,["article"])):C("",!0)]}),_:1}),v])}const q=h(A,[["render",B]]);export{w as __pageData,q as default};
