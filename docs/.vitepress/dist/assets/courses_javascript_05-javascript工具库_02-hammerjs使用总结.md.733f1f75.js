import{_ as t}from"./chunks/ArticleMetadata.f06b230e.js";import{_ as r,i as c,o as l,c as y,g as F,w as A,e as i,j as B,b as p,f as D,a as C}from"./app.f6f466d0.js";const k=JSON.parse('{"title":"hammer.js使用总结","description":"","frontmatter":{"title":"hammer.js使用总结","author":"Itway","date":"2022/12/28 14:49","categories":["JavaScript知识集"],"tags":["JavaScript工具库"]},"headers":[{"level":2,"title":"1.简介","slug":"_1-简介","link":"#_1-简介","children":[{"level":3,"title":"六大动作","slug":"六大动作","link":"#六大动作","children":[]}]},{"level":2,"title":"2.使用","slug":"_2-使用","link":"#_2-使用","children":[{"level":3,"title":"使用技巧","slug":"使用技巧","link":"#使用技巧","children":[]}]},{"level":2,"title":"3.API","slug":"_3-api","link":"#_3-api","children":[{"level":3,"title":"1.构造函数 Hanmmer","slug":"_1-构造函数-hanmmer","link":"#_1-构造函数-hanmmer","children":[]},{"level":3,"title":"2.事件对象","slug":"_2-事件对象","link":"#_2-事件对象","children":[]},{"level":3,"title":"3.常量","slug":"_3-常量","link":"#_3-常量","children":[]}]},{"level":2,"title":"4.浏览器兼容性","slug":"_4-浏览器兼容性","link":"#_4-浏览器兼容性","children":[]}],"relativePath":"courses/javascript/05-javascript工具库/02-hammerjs使用总结.md","lastUpdated":1672213578000}'),d={name:"courses/javascript/05-javascript工具库/02-hammerjs使用总结.md"},m=p("h1",{id:"hammer-js",tabindex:"-1"},[D("hammer.js "),p("a",{class:"header-anchor",href:"#hammer-js","aria-hidden":"true"},"#")],-1),h=C(`<blockquote><p>是一个解决移动端触摸手势的库，可以完美的实现在移动端开发的大多数事件，如：点击、滑动、拖动、多点触控等事件。</p></blockquote><h2 id="_1-简介" tabindex="-1">1.简介 <a class="header-anchor" href="#_1-简介" aria-hidden="true">#</a></h2><ul><li>用于检测触摸手势的 JavaScript 库</li><li>添加对触摸手势的支持并移除了点击的 300ms</li><li>支持最常见的单点和多点触摸手势，并且可以完全扩展以添加自定义手势</li></ul><p>官方文档：<a href="http://hammerjs.github.io/" target="_blank" rel="noreferrer">http://hammerjs.github.io/</a></p><h3 id="六大动作" tabindex="-1">六大动作 <a class="header-anchor" href="#六大动作" aria-hidden="true">#</a></h3><p><img src="https://upload-images.jianshu.io/upload_images/2135887-7c57381027e40fe1.jpg" alt="手势图"></p><ol><li><p><strong>tap（点击）：</strong> 在指定的 DOM 区域内，一个手指轻拍或点击时触发该事件（类似 PC 端的 click），该事件最大点击时间为 250ms，如果超过 250ms 则按 press 事件处理。</p><blockquote><p>在安卓触屏上，Tap 事件和 click 事件可以同时触发，但 click 事件会有几百毫秒的延迟，即先触发 Tap 事件，过一段时间再触发 click 事件。</p></blockquote></li><li><p><strong>press（长按）：</strong> 在指定的 DOM 区域内，这个事件相当于 PC 端的 Click 事件，不能包含任何的移动，最小按压时间为 500ms，常用于我们在手机上用的复制粘贴等功能。</p><p>该事件事分别对以下事件进行监听并处理:</p><ul><li>pressup: 点击事件离开时触发</li></ul></li><li><p><strong>pan（拖动）：</strong> 在指定的 DOM 区域内，一个手指放下并移动事件，即触屏中的拖动事件。</p><p>该事件事分别对以下事件进行监听并处理：</p><ul><li>panstart: 拖动开始</li><li>panmove: 拖动过程</li><li>panend: 拖动结束</li><li>pancancel: 拖动取消</li><li>panleft: 向左拖动</li><li>panright: 向右拖动</li><li>panup: 向上拖动</li><li>pandown: 向下拖动</li></ul></li><li><p><strong>swipe（滑动）：</strong> 在指定的 DOM 区域内，一个手指快速的在触屏上滑动，即平时用到最多的滑动事件</p><p>该事件事分别对以下事件进行监听并处理：</p><ul><li>swipeleft: 向左滑动</li><li>swiperight: 向右滑动</li><li>swipeup: 向上滑动</li><li>swipedown: 向下滑动</li></ul></li><li><p><strong>pinch（多点触控）：</strong> 在指定的 DOM 区域内，两个手指（默认为两个手指，多指触控需要单独设置）或多个手指相对（越来越近）移动或相向（越来越远）移动时事件</p><p>该事件事分别对以下事件进行监听并处理:</p><ul><li>pinchstart: 多点触控开始</li><li>pinchmove: 多点触控过程</li><li>pinchend: 多点触控结束</li><li>pinchcancel: 多点触控取消</li><li>pinchin: 多点触控时两手指越来越近</li><li>pinchout: 多点触控时两手指越来越远</li></ul></li><li><p><strong>rotate（多点旋转）：</strong> 在指定的 DOM 区域内，当两个手指或更多手指呈圆型旋转时触发</p><p>该事件事分别对以下事件进行监听并处理:</p><ul><li>rotatestart: 旋转开始</li><li>rotatemove: 旋转过程</li><li>rotateend: 旋转结束</li><li>rotatecancel: 旋转取消</li></ul></li></ol><h2 id="_2-使用" tabindex="-1">2.使用 <a class="header-anchor" href="#_2-使用" aria-hidden="true">#</a></h2><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelector</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;#app&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Hammer</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;pan&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">ev</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">ev</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> hammertime </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Hammer</span><span style="color:#A6ACCD;">(app)</span></span>
<span class="line"><span style="color:#A6ACCD;">hammertime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ev</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ev</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>hammer.js 提供了 tap（点击）, doubletap, press（长按）, pan（拖动）, swipe（滑动） 和多点触控的 pinch, rotate（旋转），默认情况下 pinch 与 rotate 是禁用的，因为它们会阻塞元素，可以通过以下命令来启用：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;pinch&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">enable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;rotate&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">enable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">hammertime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pinch</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">enable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">hammertime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rotate</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">enable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>默认的 pan（拖动） 仅支持水平方向，可以选择启用全部方向，swipe 也可以启用垂直方向：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;pan&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">direction</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">DIRECTION_ALL</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;swipe&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">direction</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">DIRECTION_VERTICAL</span><span style="color:#ABB2BF;"> })</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">hammertime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">direction</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIRECTION_ALL </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">hammertime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">swipe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">direction</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIRECTION_VERTICAL </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>建议使用 viewport meta 禁用双击/缩放功能，更多的控制网页；支持触摸操作的浏览器就不需要这样做：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">meta</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">meta</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">viewport</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">content</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"></span></code></pre></div><p>可以为实例设置自己的识别器集合。这需要更多的代码，但是它使您能够更好地控制正在被识别的手势：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mc</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">Manager</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">myElement</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">myOptions</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">mc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">Pan</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">direction</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">DIRECTION_ALL</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">threshold</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> }))</span></span>
<span class="line"><span style="color:#E5C07B;">mc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">Tap</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">event</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;quadrupletap&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">taps</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;"> }))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">mc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;pan&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handlePan</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">mc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;quadrupletap&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">handleTaps</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> mc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Manager</span><span style="color:#A6ACCD;">(myElement</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> myOptions)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Pan</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">direction</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIRECTION_ALL</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">threshold</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">mc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Tap</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">event</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">quadrupletap</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">taps</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> handlePan)</span></span>
<span class="line"><span style="color:#A6ACCD;">mc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">quadrupletap</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> handleTaps)</span></span>
<span class="line"></span></code></pre></div><p>上面的例子创建了一个包含一个 pan 和四拍手势的实例。您创建的识别程序实例按其添加顺序执行，同时只能识别一个。</p><h3 id="使用技巧" tabindex="-1">使用技巧 <a class="header-anchor" href="#使用技巧" aria-hidden="true">#</a></h3><ol><li><p><strong>事件委托和 DOM 事件：</strong> hammer.js 能够通过配置选项 domEvents: true 触发 DOM 事件，它会使你的方法 stopPropagation()，所以可以使用事件委托，hammer.js 不会解除绑定的事件。</p></li><li><p><strong>尽量避免垂直 pan/swipe：</strong> 垂直 pan 用于滚动页面，一些（旧）浏览器不会触发这个事件，所以 hammer.js 无法识别。</p></li><li><p><strong>删除 Windows Phone 上的突出显示：</strong> Windows Phone 上的 IE10 和 IE11 在点击某个元素时会突出显示一个小点，添加这个 meta 来删除。</p></li><li><p><strong>不能选择文本了：</strong> hammer.js 会设置 user-select 来提高 PC 的平移体验，如果需要文本选择，需要在创建实例前执行此操作。</p></li><li><p><strong>tap 后，click 也被触发了：</strong> 该点击事件也被称为 “幽灵点击”（ghost click）。</p></li><li><p><strong>使用心得：</strong> 在 Pinch 事件和 Rotate 事件中，我们用了 hammertime.add(new Hammer.Pinch());和 hammertime.add(new Hammer.Rotate ());而其他四个事件没有用，而是直接添加了事件的监听程序。原因在于，我们在 new Hammer(htmlElement)的时候，Hammer.js 默认对 Pan、Press、Swipe 和 Tab 事件进行了监听。但没有对 Pinch 和 Rotate 事件进行监听。</p></li></ol><h2 id="_3-api" tabindex="-1">3.API <a class="header-anchor" href="#_3-api" aria-hidden="true">#</a></h2><h3 id="_1-构造函数-hanmmer" tabindex="-1">1.构造函数 Hanmmer <a class="header-anchor" href="#_1-构造函数-hanmmer" aria-hidden="true">#</a></h3><p>构造函数为 Hammer(HTMLElement, [options])，options 将与默认选项 Hammer.defaults 合并。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;app&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mc</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Hammer</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">Hammer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">defaults</span><span style="color:#ABB2BF;">({})</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">app</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> mc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Hammer</span><span style="color:#A6ACCD;">(app)</span></span>
<span class="line"><span style="color:#A6ACCD;">Hammer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defaults</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p><strong>Hammer.defaults</strong></p><ol><li>touchAction: &#39;compute&#39;： 其值可为 compute, auto, pan-y, pan-x, none，默认选项会基于识别器为你选择一个正确值。</li><li>domEvents：false： 默认禁用 DOM 事件，如果需要使用事件委托，需将其设为 true</li><li>enable: true： 接受一个布尔值，或返回布尔值的函数</li><li>cssProps: {...}： 改善交互事件操作的系列 css 属性</li><li>preset: [….]： 调用 Hammer() 的时候就安装了默认的识别器，如果建立一个新的 Manager，这些将被跳过。</li></ol><h3 id="_2-事件对象" tabindex="-1">2.事件对象 <a class="header-anchor" href="#_2-事件对象" aria-hidden="true">#</a></h3><p>Name Value type 事件的名称，例如 panstart deltaX X 轴移动 deltaY Y 轴移动 deltaTime 自从第一次 input 的总时间，单位 ms distance 移动距离 angle 角度 velocityX X 轴上的速度，单位为 px/ms velocityY Y 轴上的速度，单位为 px/ms velocity velocityX/velocityY 的最高值 direction 移动方向，匹配 DIRECTION 常量 offsetDirection 相对于起点的方向，匹配 DIRECTION 常量 scale 在多点触摸缩放时，只是触摸时值为 1 rotation 在多点触摸旋转时，只是触摸时值为 0 center 多点触摸的中心位置，或者只是单独的点 srcEvent 源事件对象，类型为 TouchEvent，MouseEvent 或 PointerEvent target 收到该事件的目标 pointerType 主要点类型，可能是 touch，mouse，pen 或 kinect eventType 事件类型，匹配 INPUT 常量 isFirst 第一个 input 时为 true isFinal 最后一个 input 时为 true pointers 所有点的数组，包括结束点（touchend，mouseup） changedPointers 包含所有 new/moved/lost 的点 preventDefault 参考 srcEvent.preventDefault() 方法</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">hammertime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">on</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;pan&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;result&#39;</span><span style="color:#ABB2BF;">).</span><span style="color:#E06C75;">innerHTML</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+=</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#98C379;">&#39;X偏移量：【&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">deltaX</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;】，Y偏移量：【&#39;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">deltaY</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;】&lt;br /&gt;&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;">//控制台输出</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">e</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A6ACCD;">hammertime</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+=</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">X偏移量：【</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">deltaX</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">】，Y偏移量：【</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">deltaY</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">】&lt;br /&gt;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">//控制台输出</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-常量" tabindex="-1">3.常量 <a class="header-anchor" href="#_3-常量" aria-hidden="true">#</a></h3><ol><li><strong>DIRECTION（方向）</strong> 开启方向</li></ol><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>DIRECTION_NONE</td><td>1</td></tr><tr><td>DIRECTION_LEFT</td><td>2</td></tr><tr><td>DIRECTION_RIGHT</td><td>4</td></tr><tr><td>DIRECTION_UP</td><td>8</td></tr><tr><td>DIRECTION_DOWN</td><td>16</td></tr><tr><td>DIRECTION_HORIZONTAL</td><td>6</td></tr><tr><td>DIRECTION_VERTICAL</td><td>24</td></tr><tr><td>DIRECTION_ALL</td><td>30</td></tr></tbody></table><ol start="2"><li><strong>INPUT</strong></li></ol><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>INPUT_START</td><td>1</td></tr><tr><td>INPUT_MOVE</td><td>2</td></tr><tr><td>INPUT_END</td><td>4</td></tr><tr><td>INPUT_CANCEL</td><td>8</td></tr></tbody></table><ol start="3"><li><strong>STATE</strong></li></ol><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>STATE_POSSIBLE</td><td>1</td></tr><tr><td>STATE_BEGAN</td><td>2</td></tr><tr><td>STATE_CHANGED</td><td>4</td></tr><tr><td>STATE_ENDED</td><td>8</td></tr><tr><td>STATE_RECOGNIZED</td><td>STATE_ENDED</td></tr><tr><td>STATE_CANCELLED</td><td>16</td></tr><tr><td>STATE_FAILED</td><td>32</td></tr></tbody></table><h2 id="_4-浏览器兼容性" tabindex="-1">4.浏览器兼容性 <a class="header-anchor" href="#_4-浏览器兼容性" aria-hidden="true">#</a></h2><p><img src="https://upload-images.jianshu.io/upload_images/2135887-3482a830b1799626.jpg" alt="浏览器兼容性"></p>`,38);function E(s,u,g,_,v,T){const o=t,e=c("ClientOnly");return l(),y("div",null,[m,F(e,null,{default:A(()=>{var a,n;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=s.$frontmatter)==null?void 0:n.showArticleMetadata)??!1)?(l(),i(o,{key:0,article:s.$frontmatter},null,8,["article"])):B("",!0)]}),_:1}),h])}const N=r(d,[["render",E]]);export{k as __pageData,N as default};
